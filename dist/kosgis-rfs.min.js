/*! kosgis-rfs 2016-06-13 */

!function(a){"use strict";a.module("rfs",["ui.router","ui.bootstrap","rfs.directives","rfs.services","rfs.controllers","rfs.filters","ngSanitize"]).run(["$rootScope","$location",function(a,b){var c,d,e=b.$$absUrl.split("/");for(c=0;c<e.length;c+=1){if(d=e[c],-1!==d.indexOf("app-")){a.appID=d;break}if(-1!==d.indexOf("localhost:5000")){a.appID="app-d2121ee08caf832b73a160f9ea022ad9";break}}}]).config(["$stateProvider","$urlRouterProvider","$httpProvider",function(a,b,c){c.interceptors.push("jsonpInterceptor"),a.state("config",{url:"/:id?x&y&z&aws",controller:"config",templateUrl:"templates/config.html",resolve:{configuration:["$stateParams","$q","$http","$rootScope",function(a,b,c,d){var e=b.defer();return c.get("/couchdb/"+d.appID+"/"+a.id+"?include_docs=true").success(function(a){e.resolve(a)}).error(function(a){e.reject(a)}),e.promise}]}}).state("config.indberetninger",{url:"/indberetninger",controller:"indberetninger",templateUrl:"templates/indberetninger.html"}).state("config.indberetning",{url:"/indberetning/:indberetning",controller:"indberetning",templateUrl:"templates/indberetning.html"})}])}(this.angular),function(a,b,c){"use strict";b.Control.RFS=b.Control.extend({options:{position:"topright"},initialize:function(a){b.Util.setOptions(this,a),c.module("rfs").run(["$rootScope",function(b){b.kfticket=a.kfticket,b.sagsbehandler=a.sagsbehandler,b.hideSidebar=a.hideSidebar}])},onAdd:function(b){c.module("rfs").run(["$rootScope",function(a){a.map=b}]);var d=c.element("<div></div>"),e=c.element("<leaflet-navbar></leaflet-navbar>"),f=c.element('<div ui-view class="sidebar" ng-show="sagsbehandler && !hideSidebar"></div>'),g=c.element("<leaflet-legend></leaflet-legend>");return c.element(a.body).prepend(g).prepend(f).prepend(e),c.element(d).ready(function(){c.bootstrap(a,["rfs"])}),d[0]},onRemove:function(){}})}(this.document,this.L,this.angular),function(a){"use strict";a.module("rfs.controllers",[]).controller("config",["$scope","$rootScope","$http","$stateParams","configuration","$window",function(a,b,c,d,e,f){b.configuration=e,b.stateParams=d,b.$emit("configuration"),c.get("/couchdb/"+b.appID+"-"+e.organization+"/"+d.id).success(function(a){b.configuration.name=a.name,f.document.title=a.name}).error(function(){})}]).controller("indberetninger",["$scope","$rootScope","$http","$stateParams",function(a,b){a.showSidebar=function(){b.hideSidebar=!b.hideSidebar,console.log("rune")},b.$on("overlay",function(c,d){b.configuration.database===d.config.database&&(a.layer=d.data)})}]).controller("indberetning",["$scope","$rootScope","$http","$stateParams",function(a,b,c,d){c.get("http://data.kosgis.dk/couchdb/"+b.configuration.database+"/"+d.indberetning).success(function(b){a.indberetning=b}).error(function(a){b.error=a})}])}(this.angular),function(a,b,c){"use strict";a.module("rfs.directives",[]).directive("leafletSearch",["$http","$rootScope","$q","$timeout","kfticket","$sce",function(c,d,e,f){return{restrict:"E",templateUrl:"templates/search.html",scope:{widget:"="},controller:["$scope",function(e){var g,h,i={},j=b.featureGroup().addTo(d.map),k=e.widget.options.split("="),l={baseUrl:"http://dawa.aws.dk",adgangsadresserOnly:!0},m=[{},{},{},{}],n=["/vejnavne/autocomplete","/adgangsadresser/autocomplete","/adresser/autocomplete"],o="",p=0,q=function(a){e.search.result=a,e.search.isopen=!0},r=function(a){if(a.length>0){j.clearLayers();var c=[a[0].adgangspunkt.koordinater[1],a[0].adgangspunkt.koordinater[0]],g=b.marker(c);j.addLayer(g),g.bindPopup(e.search.input).openPopup(),f(function(){e.search.isopen=!1,d.map.setView(c,d.baselayer.selectZoom||1/0,{animate:!0})},500)}},s=function(b,d,e,f){var g=JSON.stringify(d),h={method:"JSONP",url:l.baseUrl+b,params:a.extend({callback:"JSON_CALLBACK"},d,i)};return e&&e[g]?f(e[g]):void c(h).then(function(a){e&&(e[g]=a.data),f(a.data)})},t=function(a,b,c){var d=l.adgangsadresserOnly?1:2,e={q:b};h&&(e={adgangsadresseid:h},a=2,h=void 0),s(n[a],e,m[a],function(e){e.length<=1&&d>a?t(a+1,b,c):(p=a,o=b,c(e))})};for(e.selectAddr=function(a){if(a.vejnavn)e.search.input=a.tekst+" ",t(1,e.search.input,q);else if(a.adgangsadresse){if(l.adgangsadresserOnly)return e.search.input=a.tekst,void s("/adgangsadresser",{id:a.adgangsadresse.id},m[3],r);var c=a.adgangsadresse,d={adgangsadresseid:c.id};s("/adresser/autocomplete",d,null,function(a){if(a.length>1){var d=c.vejnavn+" "+c.husnr+", ",f=" ",g=b.DomUtil.get("awsInput");c.supplerendebynavn&&(f+=", "+c.supplerendebynavn),c.postnr&&(f+=", "+c.postnr),c.postnrnavn&&(f+=" "+c.postnrnavn),e.search.input=d+f,g.focus(),g.selectionStart=g.selectionEnd=d.length,h=c.id,t(2,e.search.input,q)}else 1===a.length&&(e.search.input=a[0].tekst,s("/adgangsadresser",{id:c.id},m[3],r))})}else e.search.input=a.tekst,s("/adresser",{id:a.adresse.id},m[3],r)},g=0;g<k.length;null)i[k[g]]=k[g+1],g+=2;e.search={isopen:!1,input:"",result:[]},e.keyup=function(a){e.search.lastKey=a.keyCode;var b,c,d,f,g=!1;if(40===a.keyCode){if(e.search.result.length>0)if(e.selected){for(c=0;c<e.search.result.length;c+=1)if(b=e.search.result[c],b===e.selected){g=!0,c<e.search.result.length-1&&(e.selected=e.search.result[c+1],e.search.input=e.selected.tekst);break}g||(e.selected=e.search.result[0])}else e.selected=e.search.result[0]}else if(38===a.keyCode){if(e.search.result.length>0&&e.selected)for(c=0;c<e.search.result.length;c+=1)if(b=e.search.result[c],b===e.selected){c>0&&(e.selected=e.search.result[c-1],e.search.input=e.selected.tekst);break}}else e.search.input.length>1&&(d=e.search.input,f=0!==d.indexOf(o)?0:p,t(f,d,q))},e.keydown=function(a){13===a.keyCode&&(a.preventDefault(),e.selectAddr(e.selected),e.search.lastKey=a.keyCode)}}]}}]).directive("widgetKortkontrol",["$http","$rootScope","$q","$timeout","kfticket","$sce",function(a,b,c,d){return{restrict:"E",scope:{widget:"="},templateUrl:"templates/widget_kortkontrol.html",controller:["$scope",function(a){b.showRight=a.widget.visible,a.showSidebar=function(){a.widget.visible=!a.widget.visible,b.showRight=!b.showRight,a.$parent.$parent.$parent.isCollapsed=!0,d(function(){a.$parent.$parent.$parent.map.invalidateSize()},100)}}]}}]).directive("leafletNavbar",["$http","$rootScope","$q","$timeout","kfticket","$sce",function(){return{restrict:"E",templateUrl:"templates/navbar.html",controller:["$scope",function(a){a.isCollapsed=!0}]}}]).directive("leafletSidebar",["$http","$rootScope","$q","$timeout","kfticket","$sce",function(a,b){return{restrict:"E",templateUrl:"templates/sidebar.html",controller:["$scope",function(a){a.showSidebar=function(){b.hideSidebar=!b.hideSidebar},b.$on("configuration",function(){c.log(b.configuration)}),b.$on("overlay",function(d,e){b.configuration.database===e.config.database&&(c.log(e),a.layer=e.data)})}]}}]).directive("leafletLegend",["$http","$rootScope","$q","$timeout","kfticket","$sce","tilestream",function(c,d,e,f,g,h,i){return{restrict:"E",replace:!0,templateUrl:"templates/widget_legend.html",controller:["$scope","$rootScope",function(d,j){d.trustAsHtml=function(a){h.trustAsHtml(a)},d.isBaselayersCollapsed=!1,d.isOverlaysCollapsed=!1,d.oneAtATime=!0,j.overlays=[];var k=function(a){d.map.options.crs="25832"===a?new b.Proj.CRS.TMS("EPSG:25832","+proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs",[12e4,59e5,1e6,65e5],{resolutions:[1638.4,819.2,409.6,204.8,102.4,51.2,25.6,12.8,6.4,3.2,1.6,.8,.4,.2,.1,.05,.025,.0125,.00625]}):b.CRS.EPSG3857},l=function(d){var h=e.defer();return f(function(){var e,f,k={},l={};if(d.options&&(k=JSON.parse(d.options,function(a,b){if(b&&"string"==typeof b&&0===b.indexOf("function")){var c=new Function("return "+b)();return c}return b})),"undefined"!=typeof d.minZoom&&null!==d.minZoom&&(k.minZoom=d.minZoom),"undefined"!=typeof d.maxZoom&&null!==d.maxZoom&&(k.maxZoom=d.maxZoom),"undefined"!=typeof d.maxNativeZoom&&null!==d.maxNativeZoom&&(k.maxNativeZoom=d.maxNativeZoom),"undefined"!=typeof d.disableClusteringAtZoom&&null!==d.disableClusteringAtZoom&&(k.disableClusteringAtZoom=d.disableClusteringAtZoom),d.attribution&&(k.attribution=d.attribution),"xyz"===d.type&&d.url&&""!==d.url)d.ticket?g.getTicket().then(function(a){k.ticket=a,d.leaflet=b.tileLayer(d.url,k),h.resolve(d)}):(d.leaflet=b.tileLayer(d.url,k),h.resolve(d));else if("wms"===d.type)k=a.extend(k,d.wms),d.ticket?g.getTicket().then(function(a){k.ticket=a,d.leaflet=b.tileLayer.wms(d.url,k),h.resolve(d)}):(d.leaflet=b.tileLayer.wms(d.url,k),h.resolve(d));else if("geojson"===d.type||"database"===d.type||"straks"===d.type||"indberetninger"===d.type||"opgaver"===d.type){if(d.styles)for(e=0;e<d.styles.length;e+=1)f=d.styles[e],l[f.id]=f;d.style&&(k.style=JSON.parse(d.style,function(a,b){if(b&&"string"==typeof b&&-1!==b.indexOf("function")){var c=new Function("theme","return "+b)(l);return c}return b})),d.onEachFeature&&(k.onEachFeature=JSON.parse(d.onEachFeature,function(a,b){if(b&&"string"==typeof b&&-1!==b.indexOf("function")){var c=new Function("return "+b)();return c}return b})),d.pointToLayer&&(k.pointToLayer=JSON.parse(d.pointToLayer,function(a,c){if(c&&"string"==typeof c&&-1!==c.indexOf("function")){var d=new Function("theme","L","return "+c)(l,b);return d}return c})),"database"===d.type?c.get("/couchdb/db-"+d.database+"/_design/views/_view/data?include_docs=true").success(function(a){var c,f=b.geoJson(null,k);for(e=0;e<a.rows.length;e+=1)c=a.rows[e].doc,f.addData(c);d.markercluster?(d.leaflet=new b.MarkerClusterGroup(k),d.leaflet.addLayer(f)):d.leaflet=f,d.mouseover&&(d.leaflet.on("mouseover",function(a){a.layer.openPopup()}),d.leaflet.on("mouseout",function(a){a.layer.closePopup()})),h.resolve(d)}).error(function(a){h.reject(a)}):"geojson"===d.type?d.tile?(d.leaflet=new b.TileLayer.GeoJSON2("/couchdb/"+j.appID+"/"+j.configuration._id+"/"+d.id+"/{id}",{clipTiles:!0},k),h.resolve(d)):d.geojson?(d.leaflet=b.geoJson(d.geojson,k),h.resolve(d)):c.get("/couchdb/"+j.appID+"/"+j.configuration._id+"/"+d.id+".geojson").success(function(a){if(d.markercluster){var c=b.geoJson(a,k);d.leaflet=new b.MarkerClusterGroup(k),d.leaflet.addLayer(c)}else d.leaflet=b.geoJson(a,k);d.mouseover&&(d.leaflet.on("mouseover",function(a){a.layer.openPopup()}),d.leaflet.on("mouseout",function(a){a.layer.closePopup()})),h.resolve(d)}).error(function(a){h.reject(a)}):"straks"===d.type&&c.get("/api/"+d.database+"/straks/"+d.straks).success(function(a){a.geojson?(d.leaflet=b.geoJson(a.geojson,k),d.mouseover&&(d.leaflet.on("mouseover",function(a){a.layer.openPopup()}),d.leaflet.on("mouseout",function(a){a.layer.closePopup()})),h.resolve(d)):h.reject(a)}).error(function(a){h.reject(a)})}else"mbtiles"===d.type&&d.mbtile&&d.bounds&&("undefined"!=typeof d.minZoom&&(k.minZoom=d.minZoom),"undefined"!=typeof d.maxZoom&&(k.maxZoom=d.maxZoom),d.leaflet=b.tileLayer(i+d.mbtile+"/{z}/{x}/{y}."+d.format,k),h.resolve(d))}),h.promise},m=function(a){a.selected&&(d.map.hasLayer(a.leaflet)&&d.map.removeLayer(a.leaflet),d.map.addLayer(a.leaflet),a.leaflet.setZIndex&&a.leaflet.setZIndex(a.index))},n=function(){var a,b;for(a=0;a<j.overlays.length;a+=1)b=j.overlays[a],d.map.hasLayer(b.leaflet)&&d.map.removeLayer(b.leaflet);j.overlays=[],d.map.hasLayer(d.crosshairLayer)&&d.map.removeLayer(d.crosshairLayer)},o=function(){var a,b;for(a=0;a<j.configuration.map.overlays.length;a+=1)b=j.configuration.map.overlays[a],b.index=a+1,j.overlays.push(b),l(b).then(m);d.map.addLayer(d.crosshairLayer),d.crosshairLayer.setZIndex&&d.crosshairLayer.setZIndex(a+1)};d.overlayChange=function(a){d.map.hasLayer(a.leaflet)&&d.map.removeLayer(a.leaflet),m(a)},j.baselayerChange=function(a){a!==j.baselayer&&l(a).then(function(a){var b=d.map.getBounds(),c=a.epsg!==j.baselayer.epsg;d.map.hasLayer(j.baselayer.leaflet)&&d.map.removeLayer(j.baselayer.leaflet),c&&(n(),k(a.epsg)),d.map.addLayer(a.leaflet),a.leaflet.setZIndex&&a.leaflet.setZIndex(0),j.baselayer=a,c&&(d.map.fitBounds(b),o())})},j.overlays=[],d.map=j.map,d.crosshairLayer=b.layerGroup(),d.layer=b.geoJson(),j.$on("configuration",function(){if(j.baselayer)j.stateParams.x&&j.stateParams.y&&j.stateParams.z?d.map.setView([j.stateParams.y,j.stateParams.x],j.stateParams.z):j.stateParams.aws&&c({method:"JSONP",url:"http://dawa.aws.dk/adgangsadresser",params:a.extend({callback:"JSON_CALLBACK"},{q:j.stateParams.aws})}).then(function(a){a.data&&a.data.length>0&&d.map.setView([a.data[0].adgangspunkt.koordinater[1],a.data[0].adgangspunkt.koordinater[0]],j.stateParams.z||j.baselayer.selectZoom||1/0)});else{d.isBaselayersCollapsed="undefined"==typeof j.configuration.isBaselayersCollapsed?!1:j.configuration.isBaselayersCollapsed,d.isOverlaysCollapsed="undefined"==typeof j.configuration.isOverlaysCollapsed?!1:j.configuration.isOverlaysCollapsed;var b,e;for(b=0;b<j.configuration.map.baselayers.length;b+=1)if(e=j.configuration.map.baselayers[b],e.selected){j.baselayer=e,d.selectedBaselayer=b;break}j.baselayer&&(k(j.baselayer.epsg),l(j.baselayer).then(function(b){d.map.addLayer(b.leaflet),b.leaflet.setZIndex&&b.leaflet.setZIndex(0),j.stateParams.x&&j.stateParams.y&&j.stateParams.z?d.map.setView([j.stateParams.y,j.stateParams.x],j.stateParams.z):j.stateParams.aws?c({method:"JSONP",url:"http://dawa.aws.dk/adgangsadresser",params:a.extend({callback:"JSON_CALLBACK"},{q:j.stateParams.aws})}).then(function(a){a.data&&a.data.length>0&&d.map.setView([a.data[0].adgangspunkt.koordinater[1],a.data[0].adgangspunkt.koordinater[0]],j.stateParams.z||j.baselayer.selectZoom||1/0)}):d.map.fitBounds(b.bounds),o()}))}})}]}}])}(this.angular,this.L,this.console),function(a,b){"use strict";b.module("rfs.filters",[]).filter("objectpath",function(){return function(a,b){for(var c=a.split("/"),d=b,e=1;e<c.length;e++){var f=c[e];d.hasOwnProperty(f)&&(d=d[f])}return d}}).filter("bytes",function(){return function(a,b){if(isNaN(parseFloat(a))||!isFinite(a))return"-";"undefined"==typeof b&&(b=1);var c=["bytes","kB","MB","GB","TB","PB"],d=Math.floor(Math.log(a)/Math.log(1024));return(a/Math.pow(1024,Math.floor(d))).toFixed(b)+" "+c[d]}})}(this,this.angular,this.console),function(a,b){"use strict";b.module("rfs.services",[]).factory("kfticket",["$q","$http","$rootScope","$browser","$timeout",function(a,b,c,d,e){var f,g=0;return{getTicket:function(){var d=a.defer();return Date.now()-g<864e5?e(function(){d.resolve(f)}):b.get(c.kfticket).success(function(a){g=Date.now(),f=a,d.resolve(f)}).error(function(){d.reject()}),d.promise}}}]).factory("tilestream",["$location",function(a){return"localhost"===a.$$host?"http://localhost:8888/v2/":"http://{s}."+a.$$host+"/tilestream/v2/"}]).factory("jsonpInterceptor",["$timeout","$window",function(a,c){return{request:function(d){if("JSONP"===d.method){var e=b.callbacks.counter.toString(36);d.callbackName="angular_callbacks_"+e,d.params.callback=d.callbackName,a(function(){c[d.callbackName]=b.callbacks["_"+e]},0,!1)}return d},response:function(a){var b=a.config;return"JSONP"===b.method&&delete c[b.callbackName],a},responseError:function(a){var b=a.config;return"JSONP"===b.method&&delete c[b.callbackName],a}}}])}(this,this.angular,this.URL),angular.module("rfs").run(["$templateCache",function(a){"use strict";a.put("templates/config.html","<div class=sidebar-wrapper><div ui-view></div></div>"),a.put("templates/indberetning.html",""),a.put("templates/indberetninger.html",'<div class="panel panel-default"><div class=panel-heading><button type=button class="btn btn-xs btn-default pull-right" ng-click=showSidebar()><i class="fa fa-chevron-left"></i></button><h3 class=panel-title>Indberetninger</h3></div><div class=panel-body><p><div class=row><div class="col-xs-8 col-md-8"><input class="form-control search" placeholder="Filter"></div><div class="col-xs-4 col-md-4"><button type=button class="btn btn-primary pull-right sort" data-sort=feature-name id=sort-btn><i class="fa fa-sort"></i>&nbsp;&nbsp;Sort</button></div></div></p></div><div class="list-group sidebar-table"><a ui-sref=map.indberetning({indberetning:value.feature._id}) class=list-group-item ng-repeat="(key,value) in layer._layers"><div ng-repeat="field in configuration.list">{{field|objectpath:value.feature}}</div></a></div></div>'),a.put("templates/legend.html",'<div ng-class="{\'panel panel-default\':isLayersOpen, \'leaflet-control-layers leaflet-control\':!isLayersOpen}"><div ng-class="{\'panel-heading\':isLayersOpen, \'legend-collapse\':!isLayersOpen}"><h3 class=panel-title><a ng-click="isLayersOpen=!isLayersOpen"><i class="fa fa-globe" ng-class="{\'legend-collapse\':!isLayersOpen}"></i> <span ng-show=isLayersOpen>Lagkontrol</span></a></h3></div><div class=list-group collapse=!isLayersOpen><div class=list-group-item><div class=form-group><h4 class=panel-title><i class=fa ng-class="{\'fa-chevron-circle-up\': !isBaselayersCollapsed, \'fa-chevron-circle-down\': isBaselayersCollapsed}" ng-click="isBaselayersCollapsed=!isBaselayersCollapsed"></i> Baggrundskort</h4></div><div collapse=isBaselayersCollapsed><div class=radio ng-repeat="baselayer in configuration.map.baselayers" ng-init="baselayer.expand=true"><div class="pull-right fa fa-question-circle legend-theme-expand" ng-class="{\'fa-rotate-90\': !baselayer.expand}" ng-click="baselayer.expand=!baselayer.expand"></div><label><input type=radio name=baselayer value={{$index}} ng-model=selectedBaselayer ng-click=baselayerChange(baselayer)>{{baselayer.name}}</label><div collapse=baselayer.expand class="alert alert-info"><i class="fa fa-question-circle"></i> <span ng-bind-html=baselayer.description></span></div></div></div></div><div class=list-group-item><div class=form-group><h4 class=panel-title><i class=fa ng-class="{\'fa-chevron-circle-up\': !isOverlaysCollapsed, \'fa-chevron-circle-down\': isOverlaysCollapsed}" ng-click="isOverlaysCollapsed=!isOverlaysCollapsed"></i> Lag</h4></div><div collapse=isOverlaysCollapsed><div class=form-group ng-repeat="overlay in overlays" ng-init="overlay.expand=true" ng-hide=overlay.hidden><div class=checkbox><label><div class="pull-right fa fa-question-circle legend-theme-expand" ng-class="{\'fa-rotate-90\': !overlay.expand}" ng-click="overlay.expand=!overlay.expand"></div><input type=checkbox ng-model=overlay.selected ng-change=overlayChange(overlay)>{{overlay.name}}</label></div><div collapse=overlay.expand><table><tr ng-repeat="value in overlay.styles" ng-init="x=(value.style.radius && value.style.weight)?(value.style.radius + value.style.weight):12"><td style=text-align:center;padding-right:5px>{{value.style.pointType}} <svg ng-if="value.style.pointType===\'cirle\' || value.style.pointType===\'cirleMarker\'" ng-style="{\'line-height\':(value.style.radius && value.style.weight)?(value.style.radius + value.style.weight)*2+\'px\':\'24px\',\'height\':(value.style.radius && value.style.weight)?(value.style.radius + value.style.weight)*2+\'px\':\'24px\',\'width\':(value.style.radius && value.style.weight)?(value.style.radius + value.style.weight)*2+\'px\':\'24px\' }"><circle ng-attr-cx={{x}} ng-attr-cy={{x}} ng-attr-r={{value.style.radius||10}} ng-attr-fill="{{value.style.fillColor||value.style.color||\'#03f\'}}" ng-attr-fill-opacity={{value.style.fillOpacity||0.5}} ng-attr-stroke-opacity={{value.style.opacity||0.5}} ng-attr-stroke="{{value.style.color||\'#03f\'}}" ng-attr-stroke-width="{{value.style.weight||2}}"></svg> <img src=lib/leaflet/dist/images/marker-icon.png ng-if="value.style.pointType===\'marker\'"> <img ng-src="\'https://api.tiles.mapbox.com/v3/marker/pin-\'+value.style.size+\'-\'+value.style.icon+\'+\'+value.style.color.substr(1)+\'.png" ng-if="value.style.pointType===\'maki\'"></td><td>{{value.id}}</td></tr></table><div class="alert alert-info"><i class="fa fa-question-circle"></i> <span ng-bind-html=overlay.description></span></div></div></div></div></div></div></div>'),a.put("templates/navbar.html",'<div class="navbar navbar-inverse navbar-fixed-top" role=navigation><div class=container><div class=navbar-header><button type=button class=navbar-toggle ng-click="isCollapsed = !isCollapsed"><span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button><div class=navbar-brand>{{configuration.name}}</div></div><div class=navbar-collapse collapse=isCollapsed><div ng-repeat="widget in configuration.widgets"><leaflet-search widget=widget ng-if="widget.id===\'adressesøgning\'"></leaflet-search><widget-kortkontrol widget=widget ng-if="widget.id===\'kortkontrol\'"></widget-kortkontrol><ul class="nav navbar-nav navbar-right" ng-if="widget.id===\'indberetninger\'"><li ng-class={active:!hideSidebar}><a ng-click=showSidebar()>{{widget.name}}</a></li></ul></div></div></div></div>'),a.put("templates/search.html",'<ul class="nav navbar-nav navbar-right"><li class=dropdown dropdown is-open=search.isopen><form class="navbar-form navbar-right" role=search><div class="form-group has-feedback"><input id=searchbox placeholder={{widget.name}} class=form-control ng-model=search.input ng-keyup=keyup($event) ng-keydown=keydown($event)> <span class="glyphicon glyphicon-search form-control-feedback"></span></div></form><ul id=searchlist class=dropdown-menu role=menu><li ng-repeat="s in search.result" ng-class="{active: s==selected}"><a href=# ng-click=selectAddr(s)>{{s.tekst}}</a></li></ul></li></ul>'),a.put("templates/widget_kortkontrol.html",'<ul class="nav navbar-nav navbar-right"><li ng-class={active:widget.visible}><a ng-click=showSidebar()>{{widget.name}}</a></li></ul>'),a.put("templates/widget_legend.html",'<div class=sidebarright ng-show=showRight><div class=list-group><div class="list-group-item active">Baggrundskort</div><div class=list-group-item><div class=radio ng-repeat="baselayer in configuration.map.baselayers" ng-init="baselayer.expand=true"><label><input type=radio name=baselayer value={{$index}} ng-model=selectedBaselayer ng-click=baselayerChange(baselayer)>{{baselayer.name}}</label><div collapse=baselayer.expand class="alert alert-info"><i class="fa fa-question-circle"></i> <span ng-bind-html=baselayer.description></span></div></div></div><div class="list-group-item active">Lag</div><div class=list-group-item><div class=form-group ng-repeat="overlay in overlays" ng-hide=overlay.hidden><div class=checkbox><label><input type=checkbox ng-model=overlay.selected ng-change=overlayChange(overlay)>{{overlay.name}}</label></div><div collapse=!overlay.selected><table><tr ng-repeat="value in overlay.styles" ng-init="x=(value.style.radius && value.style.weight)?(value.style.radius + value.style.weight):12"><td style=text-align:center;padding-right:5px ng-if="value.pointType===\'circle\' || value.pointType===\'circleMarker\'"><svg ng-style="{\'line-height\':(value.style.radius && value.style.weight)?(value.style.radius + value.style.weight)*2+\'px\':\'24px\',\'height\':(value.style.radius && value.style.weight)?(value.style.radius + value.style.weight)*2+\'px\':\'24px\',\'width\':(value.style.radius && value.style.weight)?(value.style.radius + value.style.weight)*2+\'px\':\'24px\' }"><circle ng-if="value.displayAs===\'Point\'" ng-attr-cx={{x}} ng-attr-cy={{x}} ng-attr-r={{value.style.radius||10}} ng-attr-fill="{{value.style.fill?value.style.fillColor:\'#fff\'}}" ng-attr-fill-opacity={{value.style.fillOpacity||0.5}} ng-attr-stroke-opacity={{value.style.opacity||0.5}} ng-attr-stroke="{{value.style.color||\'#03f\'}}" ng-attr-stroke-width={{value.style.weight||2}}></circle><line ng-if="value.displayAs===\'Line\'" x1=0 y1=12 x2=24 y2=12 ng-attr-stroke-opacity={{value.style.opacity||0.5}} ng-attr-stroke="{{value.style.color||\'#03f\'}}" ng-attr-stroke-width={{value.style.weight||2}}></line><rect ng-if="value.displayAs===\'Polygon\'" ng-attr-x={{value.style.weight||2}} ng-attr-y={{value.style.weight||2}} ng-attr-width={{(24-2*value.style.weight)||20}} ng-attr-height={{(24-2*value.style.weight)||20}} ng-attr-fill="{{value.style.fill?value.style.fillColor:\'#fff\'}}" ng-attr-fill-opacity={{value.style.fillOpacity||0.5}} ng-attr-stroke-opacity={{value.style.opacity||0.5}} ng-attr-stroke="{{value.style.color||\'#03f\'}}" ng-attr-stroke-width={{value.style.weight||2}}></rect></svg></td><td style=text-align:center;padding-right:5px ng-if="value.pointType===\'marker\'"><img src=lib/leaflet/dist/images/marker-icon.png></td><td style=text-align:center;padding-right:5px ng-if="value.pointType===\'maki\'"><img style=margin-bottom:-30px ng-src=https://api.tiles.mapbox.com/v3/marker/pin-{{value.style.size}}-{{value.style.icon}}+{{value.style.color.substr(1)}}.png></td><td>{{value.id}}</td></tr></table><div class="alert alert-info" ng-if=overlay.description><i class="fa fa-question-circle"></i> <span ng-bind-html=overlay.description></span></div></div></div></div></div></div>')}]);
//# sourceMappingURL=kosgis-rfs.min.js.map